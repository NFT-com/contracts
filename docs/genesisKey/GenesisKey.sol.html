<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for genesisKey/GenesisKey.sol</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../prettify.css" />
    <link rel="stylesheet" href="../base.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class='wrapper'>
  <div class='pad1'>
    <h1>
      <a href="../index.html">all files</a> / <a href="index.html">genesisKey/</a> GenesisKey.sol
    </h1>
    <div class='clearfix'>
      <div class='fl pad1y space-right2'>
        <span class="strong">27.54% </span>
        <span class="quiet">Statements</span>
        <span class='fraction'>19/69</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">7.5% </span>
        <span class="quiet">Branches</span>
        <span class='fraction'>3/40</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">42.86% </span>
        <span class="quiet">Functions</span>
        <span class='fraction'>9/21</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">28.17% </span>
        <span class="quiet">Lines</span>
        <span class='fraction'>20/71</span>
      </div>
    </div>
  </div>
  <div class='status-line low'></div>
<pre><table class="coverage">
<tr><td class="line-count quiet">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260</td><td class="line-coverage quiet"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">19×</span>
<span class="cline-any cline-yes">19×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">81×</span>
<span class="cline-any cline-yes">81×</span>
<span class="cline-any cline-yes">81×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">81×</span>
<span class="cline-any cline-yes">81×</span>
<span class="cline-any cline-yes">81×</span>
<span class="cline-any cline-yes">81×</span>
<span class="cline-any cline-yes">81×</span>
<span class="cline-any cline-yes">81×</span>
<span class="cline-any cline-yes">81×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">7×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">103×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">8×</span>
<span class="cline-any cline-yes">8×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">// SPDX-License-Identifier: MIT
pragma solidity &gt;=0.8.4;
&nbsp;
import "../erc721a/ERC721AUpgradeable.sol";
import "@openzeppelin/contracts-upgradeable/utils/math/SafeMathUpgradeable.sol";
import "@openzeppelin/contracts-upgradeable/utils/AddressUpgradeable.sol";
import "@openzeppelin/contracts-upgradeable/proxy/utils/Initializable.sol";
import "@openzeppelin/contracts-upgradeable/security/ReentrancyGuardUpgradeable.sol";
import "@openzeppelin/contracts-upgradeable/proxy/utils/UUPSUpgradeable.sol";
import "@openzeppelin/contracts-upgradeable/utils/cryptography/ECDSAUpgradeable.sol";
import "@openzeppelin/contracts-upgradeable/token/ERC20/IERC20Upgradeable.sol";
&nbsp;
error PausedTransfer();
error MaxSupply();
error LockUpUnavailable();
&nbsp;
contract GenesisKey is Initializable, ERC721AUpgradeable, ReentrancyGuardUpgradeable, UUPSUpgradeable {
    using SafeMathUpgradeable for uint256;
    using AddressUpgradeable for address;
    using ECDSAUpgradeable for bytes32;
&nbsp;
    // 2^128 is more than enough to store unix timestamp
    struct LockupInfo {
        uint128 totalLockup; // total lockup of this GK
        uint128 currentLockup; // unlocked when currentLock is 0
    }
&nbsp;
    /* An ECDSA signature. */
    struct Sig {
        uint8 v;
        bytes32 r;
        bytes32 s;
    }
&nbsp;
    address public owner;
    uint96 public publicSaleDurationSeconds; // length of public sale in seconds
&nbsp;
    address public multiSig;
    uint96 public initialEthPrice; // initial price of genesis keys in Weth
&nbsp;
    address public genesisKeyMerkle; // Deprecated
    uint96 public finalEthPrice; // final price of genesis keys in Weth
&nbsp;
    address public gkTeamClaimContract;
    uint96 public publicSaleStartSecond; // second public sale starts
&nbsp;
    address public signerAddress;
    bool public startPublicSale; // global state indicator if public sale is happening
    bool public pausedTransfer; // Deprecated
    bool public randomClaimBool; // Deprecated
    bool public lockupBoolean; // true if GK holders can lockup, false if not
    uint64 public remainingTeamAdvisorGrant; // Deprecated (0 left)
&nbsp;
    mapping(bytes32 =&gt; bool) public cancelledOrFinalized; // Deprecated
    mapping(address =&gt; bool) public whitelistedTransfer; // Deperecated
    mapping(uint256 =&gt; LockupInfo) private _genesisKeyLockUp;
&nbsp;
    uint256 public constant MAX_SUPPLY = 10000;
    uint256 public latestClaimTokenId;
&nbsp;
    event ClaimedGenesisKey(address indexed _user, uint256 _amount, uint256 _blockNum, bool _whitelist);
&nbsp;
    modifier onlyOwner() {
        <span class="missing-if-branch" title="else path not taken" >E</span>require(msg.sender == owner, "GEN_KEY: !AUTH");
        _;
    }
&nbsp;
    function initialize(
        string memory name,
        string memory symbol,
        address _multiSig,
        uint256 _auctionSeconds,
        bool _randomClaimBool,
        string memory baseURI
    ) public initializer {
        __ReentrancyGuard_init();
        __ERC721A_init(name, symbol, baseURI);
        __UUPSUpgradeable_init();
&nbsp;
        startPublicSale = false;
        publicSaleDurationSeconds = uint96(_auctionSeconds);
        owner = msg.sender;
        multiSig = _multiSig;
        remainingTeamAdvisorGrant = 250; // 250 genesis keys allocated
        randomClaimBool = _randomClaimBool;
        signerAddress = 0x9EfcD5075cDfB7f58C26e3fB3F22Bb498C6E3174;
    }
&nbsp;
    function _authorizeUpgrade(address) internal override onlyOwner {}
&nbsp;
    // governance functions =================================================================
    function setOwner(address _owner) external onlyOwner {
        owner = _owner;
    }
&nbsp;
<span class="fstat-no" title="function not covered" >    function currentXP(uint256 tokenId)</span>
        external
        view
        returns (
            bool locked,
            uint256 current,
            uint256 total
        )
    {
<span class="cstat-no" title="statement not covered" >        uint256 start = _genesisKeyLockUp[tokenId].currentLockup;</span>
<span class="cstat-no" title="statement not covered" >        if (start != 0) {</span>
<span class="cstat-no" title="statement not covered" >            locked = true</span>;
<span class="cstat-no" title="statement not covered" >            current = block.timestamp - start</span>;
        }
<span class="cstat-no" title="statement not covered" >        total = current + _genesisKeyLockUp[tokenId].totalLockup</span>;
    }
&nbsp;
<span class="fstat-no" title="function not covered" >    function toggleLockup(uint256 tokenId) internal {</span>
<span class="cstat-no" title="statement not covered" >        require(msg.sender == ownerOf(tokenId))</span>;
<span class="cstat-no" title="statement not covered" >        uint256 start = _genesisKeyLockUp[tokenId].currentLockup;</span>
<span class="cstat-no" title="statement not covered" >        if (start == 0) {</span>
<span class="cstat-no" title="statement not covered" >            if (!lockupBoolean) revert LockUpUnavailable();</span>
<span class="cstat-no" title="statement not covered" >            _genesisKeyLockUp[tokenId].currentLockup = uint128(block.timestamp)</span>;
        } else {
<span class="cstat-no" title="statement not covered" >            _genesisKeyLockUp[tokenId].totalLockup += uint128(block.timestamp - start)</span>;
<span class="cstat-no" title="statement not covered" >            _genesisKeyLockUp[tokenId].currentLockup = 0</span>;
        }
    }
&nbsp;
<span class="fstat-no" title="function not covered" >    function toggleLockup(uint256[] calldata tokenIds) external {</span>
<span class="cstat-no" title="statement not covered" >        uint256 n = tokenIds.length;</span>
<span class="cstat-no" title="statement not covered" >        for (uint256 i = 0; i &lt; n; ++i) {</span>
<span class="cstat-no" title="statement not covered" >            toggleLockup(tokenIds[i])</span>;
        }
    }
&nbsp;
    function transferFrom(
        address from,
        address to,
        uint256 tokenId
    ) public override {
        <span class="missing-if-branch" title="if path not taken" >I</span>if (_genesisKeyLockUp[tokenId].currentLockup != 0) revert PausedTransfer();
&nbsp;
        _transfer(from, to, tokenId);
    }
&nbsp;
<span class="fstat-no" title="function not covered" >    function safeTransferFrom(</span>
        address from,
        address to,
        uint256 tokenId
    ) public override {
<span class="cstat-no" title="statement not covered" >        if (_genesisKeyLockUp[tokenId].currentLockup != 0) revert PausedTransfer();</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >        safeTransferFrom(from, to, tokenId, "")</span>;
    }
&nbsp;
    /**
     * @dev See {IERC721-safeTransferFrom}.
     */
<span class="fstat-no" title="function not covered" >    function safeTransferFrom(</span>
        address from,
        address to,
        uint256 tokenId,
        bytes memory _data
    ) public override {
<span class="cstat-no" title="statement not covered" >        if (_genesisKeyLockUp[tokenId].currentLockup != 0) revert PausedTransfer();</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >        _transfer(from, to, tokenId)</span>;
<span class="cstat-no" title="statement not covered" >        if (to.isContract() &amp;&amp; !_checkContractOnERC721Received(from, to, tokenId, _data)) {</span>
            revert TransferToNonERC721ReceiverImplementer();
        }
    }
&nbsp;
<span class="fstat-no" title="function not covered" >    function setMultiSig(address _newMS) external onlyOwner {</span>
<span class="cstat-no" title="statement not covered" >        multiSig = _newMS</span>;
    }
&nbsp;
<span class="fstat-no" title="function not covered" >    function toggleLockupBoolean() external onlyOwner {</span>
<span class="cstat-no" title="statement not covered" >        lockupBoolean = !lockupBoolean</span>;
    }
&nbsp;
    function setPublicSaleDuration(uint96 _seconds) external onlyOwner {
        publicSaleDurationSeconds = _seconds;
    }
&nbsp;
    function setSigner(address _signer) external onlyOwner {
        signerAddress = _signer;
    }
&nbsp;
    // initial weth price is the high price (starting point)
    // final weth price is the lowest floor price we allow
    // num keys for sale is total keys allowed to mint
<span class="fstat-no" title="function not covered" >    function initializePublicSale(uint96 _initialEthPrice, uint96 _finalEthPrice) external onlyOwner {</span>
<span class="cstat-no" title="statement not covered" >        require(!startPublicSale, "GEN_KEY: sale already initialized")</span>;
<span class="cstat-no" title="statement not covered" >        initialEthPrice = _initialEthPrice</span>;
<span class="cstat-no" title="statement not covered" >        finalEthPrice = _finalEthPrice</span>;
<span class="cstat-no" title="statement not covered" >        publicSaleStartSecond = uint96(block.timestamp)</span>;
<span class="cstat-no" title="statement not covered" >        startPublicSale = true</span>;
    }
&nbsp;
    function _startTokenId() internal pure override returns (uint256) {
        return 1;
    }
&nbsp;
    /// @notice Transfers ETH to the recipient address
    /// @dev Fails with `STE`
    /// @param to The destination of the transfer
    /// @param value The value to be transferred
<span class="fstat-no" title="function not covered" >    function safeTransferETH(address to, uint256 value) internal {</span>
<span class="cstat-no" title="statement not covered" >        (bool success, ) = to.call{ value: value }(new bytes(0));</span>
<span class="cstat-no" title="statement not covered" >        require(success, "STE")</span>;
    }
&nbsp;
    // helper function for transferring eth from the public auction to MS
<span class="fstat-no" title="function not covered" >    function transferETH() external onlyOwner {</span>
<span class="cstat-no" title="statement not covered" >        safeTransferETH(multiSig, address(this).balance)</span>;
    }
&nbsp;
    // function used for internal testing
    function mintKey(address _recipient) external onlyOwner {
        <span class="missing-if-branch" title="if path not taken" >I</span>if (totalSupply() == MAX_SUPPLY) revert MaxSupply();
        _mint(_recipient, 1, "", false);
    }
&nbsp;
<span class="fstat-no" title="function not covered" >    function publicBuyKey() external payable nonReentrant {</span>
        // checks
<span class="cstat-no" title="statement not covered" >        require(startPublicSale, "GEN_KEY: invalid time")</span>;
<span class="cstat-no" title="statement not covered" >        require(block.timestamp &gt; 1651705200, "Q.E.D")</span>; // 5/4/22 11pm utc
<span class="cstat-no" title="statement not covered" >        if (totalSupply() != MAX_SUPPLY) revert MaxSupply();</span>
<span class="cstat-no" title="statement not covered" >        if (latestClaimTokenId == 5000) revert MaxSupply();</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >        uint256 currPrice = getCurrentPrice();</span>
<span class="cstat-no" title="statement not covered" >        require(msg.value &gt;= currPrice, "GEN_KEY: INSUFFICIENT FUNDS")</span>;
&nbsp;
        // effects
<span class="cstat-no" title="statement not covered" >        latestClaimTokenId += 1</span>;
&nbsp;
        // interactions
<span class="cstat-no" title="statement not covered" >        if (msg.value &gt; currPrice) {</span>
<span class="cstat-no" title="statement not covered" >            safeTransferETH(msg.sender, msg.value - currPrice)</span>;
        }
&nbsp;
<span class="cstat-no" title="statement not covered" >        safeTransferETH(multiSig, address(this).balance)</span>;
<span class="cstat-no" title="statement not covered" >        _adminTransfer(address(this), msg.sender, latestClaimTokenId)</span>;
    }
&nbsp;
    // public function for returning the current price
<span class="fstat-no" title="function not covered" >    function getCurrentPrice() public view returns (uint256) {</span>
<span class="cstat-no" title="statement not covered" >        require(startPublicSale, "GEN_KEY: invalid time")</span>;
<span class="cstat-no" title="statement not covered" >        uint256 secondsPassed = 0;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >        secondsPassed = block.timestamp - publicSaleStartSecond</span>;
&nbsp;
<span class="cstat-no" title="statement not covered" >        if (secondsPassed &gt;= publicSaleDurationSeconds) {</span>
<span class="cstat-no" title="statement not covered" >            return finalEthPrice;</span>
        } else {
<span class="cstat-no" title="statement not covered" >            uint256 totalPriceChange = initialEthPrice - finalEthPrice;</span>
<span class="cstat-no" title="statement not covered" >            uint256 currentPriceChange = totalPriceChange.mul(secondsPassed).div(publicSaleDurationSeconds);</span>
<span class="cstat-no" title="statement not covered" >            uint256 currentPrice = initialEthPrice - currentPriceChange;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >            return currentPrice;</span>
        }
    }
}
&nbsp;</pre></td></tr>
</table></pre>
<div class='push'></div><!-- for sticky footer -->
</div><!-- /wrapper -->
<div class='footer quiet pad2 space-top1 center small'>
  Code coverage
  generated by <a href="http://istanbul-js.org/" target="_blank">istanbul</a> at Mon Jun 13 2022 19:15:50 GMT+0000 (Coordinated Universal Time)
</div>
</div>
<script src="../prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>
<script src="../sorter.js"></script>
</body>
</html>
